<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
    <!-- Mapper.java연결 -->
    <mapper namespace="com.java.www.mapper.BoardMapper">
    <!-- 게시글 전체 가져오기 -->
    	<select id="selectAll" resultType="com.java.www.dto.BoardDto">
    		<![CDATA[
    		select * from (select rownum rnum, a.* from (
    		select * from board order by bgroup desc, bstep asc) a)
    		where rnum>=1 and rnum <=20 ]]>
    	</select>
    	<!-- 게시글 보기 -->
    	<select id="selectOne" resultType="com.java.www.dto.BoardDto">
    		select * from board where bno=#{bno}
    	</select>
    	<!-- 이전글 -->
    	<select id="selectPrev" resultType="com.java.www.dto.BoardDto">
    		select * from (select rownum rnum, a.* from
		(select * from board order by bgroup desc, bstep asc) a	)
		where rnum=( select rnum from (select rownum rnum, a.* from
		(select * from board order by bgroup desc, bstep asc) a ) where bno=#{bno} )+1
    	</select>
    	<!-- 다음글 -->
    	<select id="selectNext" resultType="com.java.www.dto.BoardDto">
    		select * from (select rownum rnum, a.* from
		(select * from board order by bgroup desc, bstep asc) a	)
		where rnum=( select rnum from (select rownum rnum, a.* from
		(select * from board order by bgroup desc, bstep asc) a ) where bno=#{bno} )-1
    	</select>
    	<!-- 게시글 쓰기 -->
    	<insert id="Insert">
    		insert into board values(board_seq.nextval,#{btitle},#{bcontent},sysdate,
    		#{id},board_seq.currval,0,0,1,#{bfile}
    		)
    	</insert>
    	<update id="bUpdate">
    		update board set btitle=#{btitle},bcontent=#{bcontent},bdate=sysdate,
    		bfile=#{bfile}
    		where bno=#{bno}
    	</update>
    	
    	
    </mapper>